From 23573d2ccc1859cfd66d2acfcae827cf1c4e0be3 Mon Sep 17 00:00:00 2001
From: Frode Nordahl <fnordahl@ubuntu.com>
Date: Thu, 25 Jul 2024 16:00:05 +0200
Subject: [PATCH 3/7] ci: Manage host/system level dependencies.

Most dependencies are managed in the `prepare-container` job,
but there are some host/system level dependencies.

This will be used by a subsequent patch that adds system tests
that require the `vrf` kernel module to be loaded.

Signed-off-by: Frode Nordahl <fnordahl@ubuntu.com>
---
 .github/workflows/test.yml | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/.github/workflows/test.yml b/.github/workflows/test.yml
index f7a184c13..0726ed5da 100644
--- a/.github/workflows/test.yml
+++ b/.github/workflows/test.yml
@@ -108,6 +108,11 @@ jobs:
         - { arch: x86, compiler: gcc, opts: --disable-ssl }
 
     steps:
+    - name: system-level-dependencies
+      run: |
+        sudo apt update
+        sudo apt -y install linux-modules-extra-$(uname -r)
+
     - name: checkout
       if: github.event_name == 'push' || github.event_name == 'pull_request'
       uses: actions/checkout@v4
-- 
2.43.0

